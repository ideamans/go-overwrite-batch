# UnifiedOverwriteBatchFlow - ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
unified-overwrite-batch-flow/
â”œâ”€â”€ README.md
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ LICENSE
â”‚
â”œâ”€â”€ uobf.go                     # ãƒ¡ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾© (ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰)
â”œâ”€â”€ workflow.go                 # ProcessingWorkflowã®è©³ç´°å®Ÿè£…
â”œâ”€â”€ logger.go                   # Loggeré–¢é€£ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ errors.go                   # ã‚¨ãƒ©ãƒ¼å‹ã¨ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚
â”œâ”€â”€ filesystem/                 # ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
â”‚   â”œâ”€â”€ filesystem.go           # FileSystemã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®åŸºåº•å®Ÿè£…
â”‚   â”œâ”€â”€ local.go               # ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
â”‚   â”œâ”€â”€ ftp.go                 # FTP/FTPSå®Ÿè£…
â”‚   â”œâ”€â”€ sftp.go                # SFTPå®Ÿè£…
â”‚   â”œâ”€â”€ s3.go                  # Amazon S3å®Ÿè£…
â”‚   â”œâ”€â”€ webdav.go              # WebDAVå®Ÿè£…
â”‚   â””â”€â”€ factory.go             # ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼
â”‚
â”œâ”€â”€ status/                     # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†å®Ÿè£…
â”‚   â”œâ”€â”€ status.go              # StatusMemoryã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åŸºåº•å®Ÿè£…
â”‚   â”œâ”€â”€ kvs.go                 # KVSãƒ™ãƒ¼ã‚¹ã®StatusMemoryå®Ÿè£…
â”‚   â”œâ”€â”€ memory.go              # ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªå®Ÿè£…ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
â”‚   â””â”€â”€ leveldb.go             # LevelDBå®Ÿè£…
â”‚
â”œâ”€â”€ backlog/                    # ãƒãƒƒã‚¯ãƒ­ã‚°ç®¡ç†å®Ÿè£…  
â”‚   â”œâ”€â”€ backlog.go             # BacklogManagerã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åŸºåº•å®Ÿè£…
â”‚   â”œâ”€â”€ compressed.go          # gzipåœ§ç¸®ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè£…
â”‚   â””â”€â”€ json.go                # JSONå½¢å¼ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚
â”œâ”€â”€ config/                     # è¨­å®šç®¡ç†
â”‚   â”œâ”€â”€ config.go              # è¨­å®šæ§‹é€ ä½“
â”‚   â”œâ”€â”€ loader.go              # YAML/JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
â”‚   â””â”€â”€ validation.go          # è¨­å®šå€¤æ¤œè¨¼
â”‚
â”œâ”€â”€ internal/                   # å†…éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆå¤–éƒ¨ã«å…¬é–‹ã—ãªã„ï¼‰
â”‚   â”œâ”€â”€ worker/                # ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ¼ãƒ«å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ pool.go
â”‚   â”‚   â””â”€â”€ worker.go
â”‚   â”œâ”€â”€ retry/                 # å†è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ retry.go
â”‚   â”œâ”€â”€ progress/              # é€²æ—ç®¡ç†
â”‚   â”‚   â””â”€â”€ tracker.go
â”‚   â””â”€â”€ patterns/              # open-match.dev/open-matchã‚’ä½¿ç”¨ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
â”‚       â””â”€â”€ matcher.go
â”‚
â”œâ”€â”€ examples/                   # ä½¿ç”¨ä¾‹
â”‚   â”œâ”€â”€ basic/                 # åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â”œâ”€â”€ advanced/              # é«˜åº¦ãªè¨­å®šä¾‹
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â”œâ”€â”€ config-files/          # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ³ãƒ—ãƒ«
â”‚   â”‚   â”œâ”€â”€ basic.yaml
â”‚   â”‚   â””â”€â”€ production.yaml
â”‚   â””â”€â”€ adapters/              # ãƒ­ã‚¬ãƒ¼ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ä¾‹
â”‚       â”œâ”€â”€ logrus_adapter.go
â”‚       â”œâ”€â”€ zap_adapter.go
â”‚       â””â”€â”€ slog_adapter.go
â”‚
â”œâ”€â”€ tests/                      # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ integration/           # çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆDockerã‚³ãƒ³ãƒ†ãƒŠä½¿ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ filesystem_test.go
â”‚   â”‚   â”œâ”€â”€ workflow_test.go
â”‚   â”‚   â”œâ”€â”€ end_to_end_test.go
â”‚   â”‚   â””â”€â”€ helpers/           # ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”‚       â”œâ”€â”€ containers.go  # testcontainers-goç®¡ç†
â”‚   â”‚       â””â”€â”€ dockertest.go  # dockertest/v3ç®¡ç†
â”‚   â”œâ”€â”€ mocks/                 # ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ filesystem_mock.go
â”‚   â”‚   â”œâ”€â”€ status_mock.go
â”‚   â”‚   â””â”€â”€ backlog_mock.go
â”‚   â””â”€â”€ testdata/              # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚       â”œâ”€â”€ sample_files/
â”‚       â””â”€â”€ config_samples/
â”‚
â””â”€â”€ docs/                       # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ architecture.md        # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
    â”œâ”€â”€ configuration.md       # è¨­å®šã‚¬ã‚¤ãƒ‰
    â”œâ”€â”€ filesystem_guide.md    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ åˆ¥è¨­å®š
    â”œâ”€â”€ deployment.md          # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰
    â””â”€â”€ troubleshooting.md     # ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
```

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã®è¨­è¨ˆæ€æƒ³

### ğŸ“¦ **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ†é›¢**

- **uobf.go**: å…¨ä½“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ï¼ˆå…¬é–‹APIï¼‰
- **filesystem/**: å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- **status/**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ã®å„ç¨®å®Ÿè£…
- **backlog/**: ãƒãƒƒã‚¯ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

### ğŸ”’ **internal/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**

- å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸããªã„å®Ÿè£…è©³ç´°
- ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ¼ãƒ«ã€å†è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯ã€é€²æ—ç®¡ç†ãªã©

### ğŸ“ **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ**

- YAML/JSONè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ
- ç’°å¢ƒåˆ¥è¨­å®šã®ç®¡ç†

### ğŸ§ª **ãƒ†ã‚¹ãƒˆæ§‹æˆ**

- å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã® *_test.goï¼‰
- çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆtests/integration/ï¼‰
  - testcontainers-goã¨dockertest/v3ã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãªã‚³ãƒ³ãƒ†ãƒŠç®¡ç†
  - ãƒªãƒ¢ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®å‹•çš„ãƒ†ã‚¹ãƒˆç’°å¢ƒ
  - E2E ãƒ†ã‚¹ãƒˆï¼ˆå…¨ä½“ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆï¼‰
- ãƒ¢ãƒƒã‚¯ï¼ˆtests/mocks/ï¼‰

### ğŸ“– **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**

- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‹ã‚‰é‹ç”¨ã¾ã§ç¶²ç¾…
- è¨­å®šä¾‹ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## go.mod ã®ä¾‹

```go
module github.com/your-org/unified-overwrite-batch-flow

go 1.21

require (
    github.com/aws/aws-sdk-go-v2 v1.24.0
    github.com/pkg/sftp v1.13.6
    github.com/studio-b12/gowebdav v0.9.0
    github.com/syndtr/goleveldb v1.0.0
    github.com/testcontainers/testcontainers-go v0.26.0
    github.com/ory/dockertest/v3 v3.10.0
    // ãã®ä»–ã®ä¾å­˜é–¢ä¿‚
)
```

ã“ã®æ§‹æˆã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿè¿½åŠ ã—ãŸã„æ©Ÿèƒ½ã‚„å¤‰æ›´ã—ãŸã„æ§‹æˆãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ï¼
